<h1>Ressource : Heroku Pipeline</h1>

<h2>1. Introduction</h2>
<p>Dans ce cours nous allons voir comment utiliser heroku pipeline, une des nombreuses utilit√©s pratique et indispensable d'heroku</p>
<p>Gr√¢ce √† heroku pipeline tu vas pouvoir cr√©er plusieurs application heroku pour un m√™me projet, pour avoir une branche developpement et une branche en production d'un m√™me repo github</p>

<h2>2. Historique</h2>
<p>Je ne sais pas si tu es d√©j√† au courant, mais Heroku fut fond√© en 2007 par James Lindenbaum, Adam Wiggins et Orion Henry.  Le 8 d√©cembre 2010, Salesforce.com se porte acqu√©reur de l'entreprise Heroku et l'int√®gre comme filiale du groupe.</p>
<p>En Juillet 2011 Yukihiro "Matz" Matsumoto, cr√©ateur et mainteneur du langage Ruby, rejoint Heroku comme Chief Architect. La m√™me ann√©e Heroku et Facebook concluent un partenariat.</p>

<h2>3. La ressource</h2>
<p>Pour commencer, rien de plus simple, cr√©er ton application RoR et lance heroku dans ton navigateur √† cette adresse : https://www.heroku.com/</p>

<h3>3.1 Application pipeline</h3>

<h4>3.1.1 Cr√©ation de la pipeline & Link github</h4>
<p>Pour commencer il te faut cr√©er t'on application sur "New" en selectionant "Create new pipeline" </p>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üé® EXEMPLE ILLUSTR√â</h4>
      <div class="text-center">
        <img class="img-fluid" src="https://i.imgur.com/OlxLe4S.png" alt="New_app_pipeline">
      </div>
    </div>
  </div>
</div>

<p>Pour la suite il te faudras donner un nom a t'on application sur heroku, relier t'on compte et chercher le mot cl√© en rapport a l'application github que tu veux relier</p>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üé® EXEMPLE ILLUSTR√â BIS</h4>
      <div class="text-center">
        <img class="img-fluid" src="https://i.imgur.com/XPC49iC.png" alt="Create_application">
      </div>
    </div>
  </div>
</div>

<p>A ce stade tu viens d√©j√† de cr√©er une application heroku pipeline fonctionnelle !!!</p>

<h4>3.1.2 Cr√©ation des applications heroku</h4>
<p>Une fois l'appli heroku cr√©√©e tu arrives sur une page ou il y a 3 zones (Review Apps , STAGING et PRODUCTION) dans staging clique sur 'add app' puis 'create new app', il te faudra lui donner le nom de t'on app en dev et surtout n'oublie pas la r√©gion comme sur l'image </p>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üé® EXEMPLE ILLUSTR√â</h4>
      <div class="text-center">
        <img class="img-fluid" src="https://i.imgur.com/E35N5iT.png" alt="Cr√©er l'appli en dev">
      </div>
    </div>
  </div>
</div>

<P>Une fois fini tu devrais avoir ce r√©sultat la, il te suffit de d√©placer l'application en d√©veloppement et faire l'app en production dans l'onglet production</P>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üé® EXEMPLE ILLUSTR√â BIS</h4>
      <div class="text-center">
        <img class="img-fluid" src="https://i.imgur.com/nQGoLbF.png" alt="Cr√©er l'appli en prod">
      </div>
    </div>
  </div>
</div>

<h4>3.1.3 Branchement application heroku et github</h4>
<p>Pour connecter tes branchs √† l'application heroku il te faut cliquer sur les deux petites fl√®ches en bas √† droite de ton app "Deploy a branch", s√©lectionne la branch github 'development' puis d√©ploie-la</p>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üé® EXEMPLE ILLUSTR√â</h4>
      <div class="text-center">
        <img class="img-fluid" src="https://i.imgur.com/JvpvwM9.png" alt="Deploy branch">
      </div>
    </div>
  </div>
</div>

<h4>3.1.4 Branchement application heroku et RoR</h4>
<p>Pour commencer il te faudras r√©cup√©r√© ton lien git heroku, celui-ci ce trouve dans la partie "Settings" de ton application en dev</p>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üé® EXEMPLE ILLUSTR√â</h4>
      <div class="text-center">
        <img class="img-fluid" src="https://i.imgur.com/aNDrJMq.png" alt="name">
      </div>
    </div>
  </div>
</div>

<p>Ensuite il te suffit de simplement te rendre sur la branche development en local de ta machine puis de taper cette commande :</p>
<code class="language-bash">git remote add heroku lien-de-on-git-heroku</code>
<p>Te voici enfin connect√© √† ton application heroku</p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üöÄ ALERTE BONNE ASTUCE</h4>
      <p class="card-text">Cela fonctionne dans un sans comme dans l'autre, si tu souhaite changer de branche heroku il te suffit de faire :</p>
      <pre><code class="language-bash">git remote remove heroku</code></pre>
      <br>
      <p class="card-text">Tu peux √©galement v√©rifier √† quel remote d'heroku tu es brancher avec cette commande :</p>
      <pre><code class="language-bash">git remote --v</code></pre>
    </div>
  </div>
</div>

<h3>3.2 Passage de dev √† prod</h3>
<p>Maintenant pour mettre ton application developpement en production, il te suffit de la repasser en staging, √† partir de la tu pourras commencer √† la tester pour la production, comme vu dans les cours pr√©c√©dent.</p>
<p>Suite √† cela, tu auras un bouton de disponible qui est "Promote to production" </p>
<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üé® EXEMPLE ILLUSTR√â</h4>
      <div class="text-center">
        <img class="img-fluid" src="https://i.imgur.com/xWK4Cxu.png" alt="name">
      </div>
    </div>
  </div>
</div>

<p>Une fois en production n'oublie pas de changer de branche heroku sur ton application en locale</p>


<h3>3.3 Erreur ?!</h3>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üöÄ ALERTE BONNE ASTUCE</h4>
      <p class="card-text">Si jamais ceci (ou toutes autres pages d'erreur) s'affiche √† ton √©cran</p>
      <div class="text-center">
        <img class="img-fluid" src="https://i.imgur.com/e74hIFn.png?1" alt="PaaS">
      </div>
      <br>
      <p>üôè N'h√©site pas √† faire des recherches üôè</p>
      <p>Petite astuce : <code class="language-bash">heroku logs --tails</code></p>
    </div>
  </div>
</div>

<h2>4. Points importants √† retenir</h2>
<ul>
<li>Cr√©er d'abord ton application heroku pipeline via le site</li>
<li>Puis cr√©er toi des applications de dev et de prod</li>
<li>Branche ton app dev √† ta branche github en dev</li>
<li>Branche ton app en local √† ton app heroku avec la commande <code>git remote add heroku lien-de-on-git-heroku</code></li>
<li>N'oublie pas de faire tes <code>heroku run rails db:migrate</code> et autres commandes de configuration</li>
<li>pipeline te permet de passer de ton app dev √† prod assez facilement (quand tu n'as pas d'erreur)</li>
<li>Et quand tu as des erreurs <code>heroku logs --tails</code> peux fortement t'aider</li>
</ul>

<pre><code class="language-bash"></code></pre>

<div class="card box-shadow-0 border-danger">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">‚ö†Ô∏è ALERTE ERREUR COMMUNE</h4>
      <p class="card-text">Cette solution n'est pas la solution unique et universelle pour la cr√©ation de pipeline heroku.</p>
      <p>n'h√©site pas √† te servir de la doc ou de faire tes propres recherches si notre ressource n'est pas assez clair pour toi ;)</p>
    </div>
  </div>
</div>

<h2>5. Pour aller plus loin</h2>
<p>Voici la doc compl√®te d'<a href="https://devcenter.heroku.com/articles/pipelines" target="_blank">heroku pipeline</a> cr√©√© par eux m√™mes</p>
<p>Une autre doc faite par <a href="https://trailhead.salesforce.com/fr/content/learn/modules/heroku-flow/create-a-heroku-pipeline-and-run-review-apps" target="_blank">salesforce</a></p>
<p>Ainsi qu'un doc compl√®te fait par <a href="https://www.theodinproject.com/paths/full-stack-ruby-on-rails/courses/ruby-on-rails/lessons/deployment" target="_blank">The Odin Project</a></p>